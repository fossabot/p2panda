{
  "openrpc": "1.0.0-rc1",
  "info": {
    "title": "p2panda RPC interface",
    "version": "0.0.1"
  },
  "components": {
    "contentDescriptors": {
      "EntryArgs": {
        "name": "entryArgs",
        "required": true,
        "description": "Arguments for next entry in log",
        "schema": {
          "$ref": "#/components/schemas/EntryArgs"
        }
      },
      "Author": {
        "name": "author",
        "required": true,
        "description": "The public key of author",
        "schema": {
          "$ref": "#/components/schemas/Author"
        }
      },
      "Schema": {
        "name": "schema",
        "required": true,
        "description": "The hash of schema describing format of message fields",
        "schema": {
          "$ref": "#/components/schemas/Hash"
        }
      }
    },
    "schemas": {
      "Author": {
        "type": "string",
        "pattern": "[0-9a-fa-f]{64}",
        "minLength": 64,
        "maxLength": 64
      },
      "Hash": {
        "type": "string",
        "minLength": 132,
        "maxLength": 132,
        "pattern": "[0-9a-fa-f]{132}"
      },
      "EntryArgs": {
        "type": "object",
        "properties": {
          "entryHashSkiplink": {
            "schema": {
              "$ref": "#/components/schemas/Hash"
            }
          },
          "entryHashBacklink": {
            "schema": {
              "$ref": "#/components/schemas/Hash"
            }
          },
          "seqNum": {
            "type": "number"
          },
          "logId": {
            "type": "number"
          }
        }
      },
      "Entry": {
        "type": "object",
        "properties": {
          "author": {
            "schema": {
              "$ref": "#/components/schemas/Author"
            }
          },
          "entryBytes": {
            "type": "string"
          },
          "entryHash": {
            "schema": {
              "$ref": "#/components/schemas/Hash"
            }
          },
          "logId": {
            "type": "number"
          },
          "payloadBytes": {
            "type": "string"
          },
          "payloadHash": {
            "schema": {
              "$ref": "#/components/schemas/Hash"
            }
          },
          "seqNum": {
            "type": "number"
          }
        }
      },
      "EntryEncoded": {
        "type": "string"
      },
      "MessageEncoded": {
        "type": "string"
      },
      "Entries": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Entry"
        }
      },
      "QueryEntriesResponse": {
        "type": "object",
        "properties": {
          "entries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Entries"
            }
          }
        }
      }
    }
  },
  "methods": [
    {
      "name": "panda_getEntryArguments",
      "summary": "Get arguments for building next entry",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/Author"
        },
        {
          "$ref": "#/components/contentDescriptors/Schema"
        }
      ],
      "result": {
        "$ref": "#/components/contentDescriptors/EntryArgs"
      },
      "examples": [
        {
          "name": "testEntryArgumentsExample",
          "params": [
            {
              "name": "author",
              "value": "2deee1fac104aaac753377bbc2ff70fa5d5154abdac4b4577392db88de6a9a49"
            },
            {
              "name": "schema",
              "value": "00401d76566758a5b6bfc561f1c936d8fc86b5b42ea22ab1dabf40d249d27dd906401fde147e53f44c103dd02a254916be113e51de1077a946a3a0c1272b9b348437"
            }
          ],
          "result": {
            "name": "testEntryArgumentsResult",
            "value": {
              "entryHashSkiplink": "SKIPLINK_HASH",
              "entryHashBacklink": "BACKLINK_HASH",
              "seqNum": 3,
              "logId": 1
            }
          }
        }
      ]
    },
    {
      "name": "panda_queryEntries",
      "params": [
        {
          "$ref": "#/components/contentDescriptors/Schema"
        }
      ],
      "result": {
        "name": "query response",
        "schema": {
          "$ref": "#/components/schemas/QueryEntriesResponse"
        }
      },
      "examples": [
        {
          "name": "testQueryExample",
          "params": [
            {
              "name": "schema",
              "value": "00401d76566758a5b6bfc561f1c936d8fc86b5b42ea22ab1dabf40d249d27dd906401fde147e53f44c103dd02a254916be113e51de1077a946a3a0c1272b9b348437"
            }
          ],
          "result": {
            "name": "testQueryResult",
            "value": {
              "entries": [
                {
                  "author": "2deee1fac104aaac753377bbc2ff70fa5d5154abdac4b4577392db88de6a9a49",
                  "entryBytes": "002deee1fac104aaac753377bbc2ff70fa5d5154abdac4b4577392db88de6a9a490101e200406cde0ae5712e776b41881a2d54bd94605c37c592b95694c941e60bf9f7f55ef6d9590d5d810ec275990ffa5983eb10f92d8cd0a07045e0cc6c3a488b01895191f9593fc917e86f697e2736058133324a3a35f4ea5e87d00e23fce84103c3f202c8fe259ba864a2c68facf56cf7a81e23a1583a2ea82584763cb56dfdd6bde607",
                  "entryHash": "0040b4108a805f2dd688c3589373fce2889093c8c843c482e0aa0d4faf512f381616c632172f73091063b71d715af7d5dd16aca29849c641609539a34db876c37b40",
                  "logId": 1,
                  "payloadBytes": "a466616374696f6e6663726561746566736368656d6178843030343031643736353636373538613562366266633536316631633933366438666338366235623432656132326162316461626634306432343964323764643930363430316664653134376535336634346331303364643032613235343931366265313133653531646531303737613934366133613063313237326239623334383433376776657273696f6e01666669656c6473a26b6465736372697074696f6ea1645465787471666f7220706c6179696e67206368657373646e616d65a16454657874656368657373",
                  "payloadHash": "00406cde0ae5712e776b41881a2d54bd94605c37c592b95694c941e60bf9f7f55ef6d9590d5d810ec275990ffa5983eb10f92d8cd0a07045e0cc6c3a488b01895191",
                  "seqNum": 1
                },
                {
                  "author": "2deee1fac104aaac753377bbc2ff70fa5d5154abdac4b4577392db88de6a9a49",
                  "entryBytes": "002deee1fac104aaac753377bbc2ff70fa5d5154abdac4b4577392db88de6a9a4901020040b4108a805f2dd688c3589373fce2889093c8c843c482e0aa0d4faf512f381616c632172f73091063b71d715af7d5dd16aca29849c641609539a34db876c37b40e200406cde0ae5712e776b41881a2d54bd94605c37c592b95694c941e60bf9f7f55ef6d9590d5d810ec275990ffa5983eb10f92d8cd0a07045e0cc6c3a488b01895191ce2681f7c2b3634d4aee83fd3464d151bdee1e90d08fb9b63108d921f8faa0e8b0fd10ebcbfa21f4d44bcf6fd06f1ef8e5b91f3fafb156141610d406f1b3a10b",
                  "entryHash": "004075cb5fc21eeda09f7ce4f04ea318e84f8430d9850e1380419c16f1c9684b1f7bc7f2b7a5ba0cb850d8ca446f56b0453132a26e482fcb21d59a0b26a5dde4811c",
                  "logId": 1,
                  "payloadBytes": "a466616374696f6e6663726561746566736368656d6178843030343031643736353636373538613562366266633536316631633933366438666338366235623432656132326162316461626634306432343964323764643930363430316664653134376535336634346331303364643032613235343931366265313133653531646531303737613934366133613063313237326239623334383433376776657273696f6e01666669656c6473a26b6465736372697074696f6ea1645465787471666f7220706c6179696e67206368657373646e616d65a16454657874656368657373",
                  "payloadHash": "00406cde0ae5712e776b41881a2d54bd94605c37c592b95694c941e60bf9f7f55ef6d9590d5d810ec275990ffa5983eb10f92d8cd0a07045e0cc6c3a488b01895191",
                  "seqNum": 2
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "panda_publishEntry",
      "params": [
        {
          "name": "entryEncoded",
          "schema": {
            "$ref": "#/components/schemas/EntryEncoded"
          }
        },
        {
          "name": "messageEncoded",
          "schema": {
            "$ref": "#/components/schemas/MessageEncoded"
          }
        }
      ],
      "result": {
        "$ref": "#/components/contentDescriptors/EntryArgs"
      },
      "examples": [
        {
          "name": "publishEntryResultExample",
          "params": [
            {
              "name": "entryEncoded",
              "value": "00ba07a8da75dd2f922d62eae7e7ac7c081e06bf0c192b2d8ea1b2ab5e9c59013e01040040944b4ae2ff31d0adc13cf94ba43b766871b4e56e96d0eebbc1b9e2b8226d448e8bc1f9507a21894579578491ff778a008688c2a3e8a409fc37522d9eabaa114c004054f65f3ac2ccf13f5862eb7c29ac20e830e173d062416dfd03a27e8a2315b69f402cfa4ca741d243b184b1d8ff203cf1f1ec4619f44758263f19a75a3537e780ee00408960c9d4f864aef757d440bc5aa5a5c0d726312eddadad68f25d06fedd10f755d51a87565972f8c3d77ef7ac66531227131b0d8857fef749c3a98cfffae8519d1e8bdb78a27348232671acda6c16aca26148642b0e803e6e2e4dfc01ca0d46ea19546be7b4302b826363a6caa28fced7ef9fd847b35a49eb67b885d65af14305"
            },
            {
              "name": "messageEncoded",
              "value": "a466616374696f6e6663726561746566736368656d6178843030343063663934663664363035363537653930633534336230633931393037306364616166373230396335653165613538616362386633353638666132313134323638646339616333626166653132616632373764323836666365376463353962376330633334383937336334653964616362653739343835653536616332613730326776657273696f6e01666669656c6473a26464617465a164546578747818323032312d30352d30325432303a30363a34352e3433305a676d657373616765a164546578746d477574656e204d6f7267656e21"
            }
          ],
          "result": {
            "name": "testEntryArgumentsResult",
            "value": {
              "entryHashSkiplink": "SKIPLINK_HASH",
              "entryHashBacklink": "BACKLINK_HASH",
              "seqNum": 3,
              "logId": 1
            }
          }
        }
      ]
    }
  ]
}